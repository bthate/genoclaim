#!/usr/bin/python3 -u
# GENOCLAIM - Using the law to administer poison, the king commits genocide" - OTP-CR-117/19 - otp.informationdesk@icc-cpi.int
#
#

import sys, os ; sys.path.insert(0, os.getcwd())

from kern.csl import Console, boot, execute

def main():
    k = boot("genoclaim")
    k.walk("genoclaim,madbot")
    if k.cfg.txt:
        return k.cmd(k.cfg.origtxt)
    if "s" in k.cfg.opts:
        k.cfg.mods += "cmd,fnd"
        cons = Console()
        cons.start()
    k.start()
    k.init(k.cfg.mods)
    k.init("stats")
    if "s" in k.cfg.opts:
        k.wait()

execute(main)
