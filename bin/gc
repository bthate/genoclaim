#!/usr/bin/python3 -u
# GENOCLAIM - king pleads quilty to genocide
#
#

import sys, os ; sys.path.insert(0, os.getcwd())

from olib import update
from ok.csl import Console, execute, parse_cli
from ok.krn import Kernel

def main():
    k = Kernel()
    c = parse_cli("genoclaim")
    update(k.cfg, c)
    k.walk("genoclaim")
    if c.txt:
        return k.cmd(c.origtxt)
    if "s" in c.opts:
        c.mods += "irc,cmd,log,tdo,fnd"
        cons = Console()
        cons.start()
    if c.mods:
        k.start()
        k.init(c.mods)
        k.init("genoclaim.stats")
        k.wait()

execute(main)
