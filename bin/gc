#!/usr/bin/python3
# BOTLIB - the bot library !
#
#

import os, sys ; sys.path.insert(0, os.getcwd())
import ol

from ol.spc import Console, boot, execute, os
from bot.irc import Cfg, IRC

def main():
    k = boot("genoclaim", os.path.expanduser("~/.genoclaim"))
    k.walk("genoclaim")
    k.walk("mymod")
    if k.cfg.args:
        return cmd(k.cfg.txt)
    if "s" in k.cfg.opts:
        c = ol.csl.Console()
        c.start()
    k.start()
    k.init(k.cfg.mods, k.cfg.exc)
    i = IRC()
    if k.cfg.args:
        i.cfg.server = k.cfg.args[0]
    i.start()
    c = Console()
    c.start()
    k.wait()

execute(main)
os._exit(0)
